# Escape Sequence Gaps

_Last updated: 2025-11-09 â€” Generated from Freminal snapshot_

This document lists ANSI / DEC / xterm / iTerm2 / WezTerm escape sequences **not yet fully implemented in Freminal**.
It serves as a roadmap for improving compatibility and feature parity with modern terminals.

---

## Summary

Freminal already covers the majority of core VT100â€“VT520 sequences:
- âœ… Complete cursor motion, SGR color/attribute, and screen manipulation commands
- âœ… Full DEC private mode toggles for wrapping, cursor visibility, and alt buffers
- âœ… Baseline OSC 0/2 window title support
- âœ… Modern color support (256 + TrueColor)

However, several higher-level, modern, and legacy extensions remain to be implemented.
These are categorized below by **importance** and **implementation difficulty**.

Legend:
- **Importance:** ğŸŸ© High (affects interoperability) | ğŸŸ¨ Medium | â¬œ Low / optional
- **Difficulty:** âš™ï¸ Trivial | ğŸ§© Moderate | ğŸ§  Complex

---

## Missing or Partial Sequences

| Category | Sequence | Importance | Difficulty | Description / Notes |
|-----------|-----------|------------|-------------|---------------------|
| **OSC** | `OSC 52 ; c ; data BEL` | ğŸŸ© | ğŸ§© | Clipboard copy/paste (used by shells like zsh, vim, tmux) |
| **OSC** | `OSC 8 ; params ; URI BEL` | ğŸŸ© | ğŸ§© | Hyperlinks (supported by WezTerm, Kitty, iTerm2) |
| **OSC** | `OSC 4 ; index ; rgb BEL` | ğŸŸ¨ | ğŸ§© | Dynamic palette change; optional color table updates |
| **OSC** | `OSC 10/11 ; ? BEL` | ğŸŸ¨ | ğŸ§© | Foreground/background color queries |
| **OSC** | `OSC 777` | â¬œ | âš™ï¸ | Konsole notification command (rarely used) |
| **CSI** | `CSI M` â€“ DL (Delete Line) | ğŸŸ© | âš™ï¸ | Required for curses/tui redraws |
| **CSI** | `CSI P` â€“ DCH (Delete Character) | ğŸŸ© | âš™ï¸ | Basic editing; required for full curses support |
| **CSI** | `CSI @` â€“ ICH (Insert Character) | ğŸŸ¨ | âš™ï¸ | Used by editors for mid-line inserts |
| **CSI** | `CSI ' 'q` â€“ DECLL (Load LEDs) | â¬œ | ğŸ§  | Keyboard LED controls (legacy) |
| **CSI** | `CSI ? 1 ; 2 c` â€“ DA2 | ğŸŸ¨ | ğŸ§© | Secondary device attributes query |
| **CSI** | `CSI 6 n` â€“ DSR (Report cursor pos) | ğŸŸ© | âš™ï¸ | Used by readline, editors, and shells |
| **CSI** | `CSI > Ps n` â€“ Device status reports | ğŸŸ¨ | ğŸ§© | Optional, informational only |
| **CSI** | `CSI Ps ; Ps s` â€“ DECSLRM (Set left/right margins) | ğŸŸ¨ | ğŸ§© | Useful for region-based scrolling |
| **ESC** | `ESC # 8` â€“ DECALN (Screen alignment test) | â¬œ | âš™ï¸ | Optional test pattern |
| **ESC** | `ESC M` â€“ Reverse Index | ğŸŸ© | âš™ï¸ | Needed for proper scroll-up in alternate screen |
| **OSC/Kitty** | `OSC 1337` extensions | ğŸŸ¨ | ğŸ§  | iTerm2 / WezTerm graphics, file transfer, notifications |
| **Mouse** | `CSI < â€¦ M/m` â€“ SGR mouse reporting | ğŸŸ© | ğŸ§© | Enables accurate mouse events |
| **Mouse** | `CSI M â€¦` â€“ X10/X11 mouse reporting | ğŸŸ¨ | ğŸ§© | Basic mouse support for ncurses apps |
| **Graphics** | Sixel (`ESC P q â€¦`) | â¬œ | ğŸ§  | Raster graphics; large undertaking |
| **FTCS** | `OSC 133 â€¦` â€“ FinalTerm Control Sequences | â¬œ | ğŸ§© | Rarely used, but modern UIs recognize them |
| **Other** | `CSI Ps t` â€“ Window ops (resize/query) | ğŸŸ¨ | ğŸ§© | Terminal geometry interactions |

---

## Roadmap by Priority

### ğŸŸ© High-Priority (Compatibility / Daily-Use)
| Sequence | Rationale |
|-----------|------------|
| OSC 52 (clipboard) | Needed for copy/paste in tmux/vim/zsh |
| OSC 8 (hyperlinks) | Common in modern terminals |
| CSI M/P (Delete Line/Char) | Required by curses-based apps |
| CSI 6n (DSR) | Shells rely on cursor position reports |
| ESC M (Reverse Index) | Needed for smooth scrollback/up |
| Mouse Tracking (1000â€“1006) | Essential for TUI apps like htop, mc, etc. |

### ğŸŸ¨ Medium-Priority (UX / Feature Parity)
| Sequence | Rationale |
|-----------|------------|
| OSC 4 / 10 / 11 | Dynamic color / theme awareness |
| DA/DA2 / >n queries | Help programs identify Freminal |
| DECSLRM | Improves ncurses region behavior |
| OSC 1337 subset | iTerm2/WezTerm integration features |

### â¬œ Low-Priority / Optional
| Sequence | Rationale |
|-----------|------------|
| OSC 777 | Konsole notification support (rare) |
| Sixel | Heavy lift, limited demand |
| FTCS | Experimental / niche adoption |
| DECLL / LED | Legacy hardware control |

---

## Implementation Hints

- **OSC 52**: Minimal: encode/decode base64 payloads and forward to system clipboard provider (Wayland/X11/macOS).
- **OSC 8**: Track hyperlink start/end; store URL + text range metadata for GUI.
- **Mouse Reporting**: Already partially scaffolded â€” wire GUI â†’ PTY event channel.
- **CSI M/P**: Integrate with text bufferâ€™s scroll/edit routines; straightforward.
- **DSR (6n)**: Respond via PTY write with `ESC [ row ; col R`.

---

## Strategic Notes

- Freminal already aligns closely with **xterm**â€™s functional core.
- The **gap area** is largely about modern conveniences (OSC, mouse, rich hyperlinks).
- Filling the high-priority items (OSC 52, OSC 8, CSI M/P, DSR, Reverse Index, Mouse Tracking)
  will deliver near-complete compatibility with most applications and shells.
- Medium-priority items bring parity with **WezTerm/iTerm2** quality-of-life features.

---

Â© 2025 Freminal Project â€” MIT License.
